---
title: "Data Pull Try"
author: Ben Sunshine
format: html
editor: visual
---

```{r}
library(httr)
library(jsonlite)

# URL for the AJAX request
pid <- 1  # or any other value you want
my_url <- paste0("/json/odds/event_", pid, "_final.json?")

# Make the AJAX request
response <- GET(my_url)

# Check if the request was successful
if (http_type(response) == "application/json") {
  # Parse JSON response
  json_data <- content(response, "text")  # Get JSON content as text
  data <- fromJSON(json_data)  # Parse JSON into R object
  
  # Access the data as needed
  # For example, if you want to access the legend_candidates array
  legend_candidates <- data$poll$rcp_avg[[1]]$candidates
  
  # Print first few records
  print(head(legend_candidates))
} else {
  cat("Request failed with status:", http_status(response))
}

```

